<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Trial2</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://webgazer.cs.brown.edu/webgazer.js"></script>
  <script src="gaze.js"></script>
</head>
<body>
  <h2>Trial2</h2>
  <div class="hotel-container" style="position: relative;">
    <div id="green-label" style="position:absolute; top:308px; left:365px; width:215px; height:80px; "></div>
    <img src="assets/trial2.jpg" alt="Hotel Page" style="max-width: 100%; height: auto;">
  </div>

  <form id="intentionForm">
    <p>How likely are you to book this hotel? (1 = Very Unlikely, 7 = Very Likely)</p>
    <input type="range" name="intention" min="1" max="7" required>
    <br><br>
    <button type="submit">Submit Rating & Continue</button>
  </form>

  <script>
    setTimeout(() => {
      document.querySelector('#intentionForm button').disabled = false;
    }, 10000);  // 10 seconds
    document.querySelector("#intentionForm").addEventListener("submit", function(event) {
      event.preventDefault();
      const score = this.intention.value;
      const trial = window.location.pathname.split('/').pop().replace('.html', '');
      const prevData = localStorage.getItem("intentions") || "";
      localStorage.setItem("intentions", prevData + trial + "," + score + "\n");

      const urlParams = new URLSearchParams(window.location.search);
      window.location.href = 'trial3.html?group=' + urlParams.get('group');
    });
    document.querySelector('#intentionForm button').disabled = true;
  </script>
</body>
</html>